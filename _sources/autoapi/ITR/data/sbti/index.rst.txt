:py:mod:`ITR.data.sbti`
=======================

.. py:module:: ITR.data.sbti


Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   ITR.data.sbti.SBTi




.. py:class:: SBTi(config: Type[ITR.configs.PortfolioCoverageTVPConfig] = PortfolioCoverageTVPConfig)

   Data provider skeleton for SBTi. This class only provides the sbti_validated field for existing companies.

   .. py:method:: _check_if_cta_file_exists(self)

      Check if the CTA file exists in the local file system


   .. py:method:: handle_cta_file(self)


   .. py:method:: _check_CTA_less_than_one_week_old(self)

      Check if the CTA file is older than a week


   .. py:method:: _use_local_cta_file(self)


   .. py:method:: _download_cta_file(self)


   .. py:method:: _fetch_and_save_cta_file(self)


   .. py:method:: filter_cta_file(self, targets)

      Filter the CTA file to create a dataframe that has one row per company
      with the columns "Action" and "Target".
      If Action = Target then only keep the rows where Target = Near-term.


   .. py:method:: get_sbti_targets(self, companies: List[ITR.interfaces.IDataProviderCompany], id_map: dict) -> List[ITR.interfaces.IDataProviderCompany]

      Check for each company if they have an SBTi validated target, first using the company LEI, 
      if available, and then using the ISIN.

      :param companies: A list of IDataProviderCompany instances
      :param id_map: A map from company id to a tuple of (ISIN, LEI)
      :return: A list of IDataProviderCompany instances, supplemented with the SBTi information



